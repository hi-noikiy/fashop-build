(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{121:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(870),n=a(81);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"parse",value:function(){return this.params=(0,l.parse)(window.location.href.split("?")[1]),this}},{key:"delEmptyParams",value:function(){var e=this,t=this.params;return Object.keys(t).forEach(function(a){""!==t[a]&&null!==t[a]&&"undefined"!==t[a]||delete e.params[a]}),this}},{key:"getParams",value:function(){return this.params}},{key:"addParams",value:function(e){var t=this;Object.keys(e).forEach(function(a){t.params[a]=e[a]})}},{key:"delParams",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{key:"state",rule:["eq","all"]},{key:"keywords_type",rule:["rely","keywords"]}],t=0;t<e.length;t++){var a=e[t].rule,r=e[t].key;switch(a[0]){case"eq":this.params[r]===a[1]&&delete this.params[r];break;case"rely":void 0===this.params[a[1]]&&delete this.params[r]}}return this}},{key:"withPageParams",value:function(){var t=e.getPageLimit(),a=t.page,r=t.rows;return this.addParams({page:a,rows:r}),this}}],[{key:"invokerForListParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(new e).parse().delEmptyParams().withPageParams().delParams(t).getParams()}},{key:"getQuery",value:function(){return(0,l.parse)(window.location.href.split("?")[1])}},{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,l.stringify)(t);return a.length?e+"?"+a:e}},{key:"getPageLimit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=e.getQuery();return{page:void 0!==r.page&&parseInt(r.page,10)>0?parseInt(r.page,10):t,rows:void 0!==r.rows&&parseInt(r.rows,10)>0?parseInt(r.rows,10):a}}},{key:"page",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=window.fashop.historyPrefix;return e.getPath(window.location.pathname.replace((n.__DEV__,r),""),Object.assign({},e.getQuery(),{page:t,rows:a}))}}]),e}();t.default=i},1975:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,l,n,i=v(a(16)),o=v(a(342)),u=v(a(22)),s=v(a(42)),d=v(a(67)),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a(17),a(551),a(21),a(43),a(73);var f=a(1),p=v(f),y=(a(8),a(34),a(69)),h=a(15),m=v(a(121)),g=a(23);function v(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=d.default.Option,b=s.default.Item,P=[{id:"all",title:"全部"},{id:"1",title:"出售中"},{id:"2",title:"已售完"},{id:"3",title:"已下架"}],k=[{id:"all",title:"默认"},{id:"1",title:"商品价格低到高"},{id:"2",title:"商品价格高到低"},{id:"3",title:"销量多到少"},{id:"4",title:"销量少到多"},{id:"5",title:"库存多到少"},{id:"6",title:"库存少到多"},{id:"7",title:"创建时间早到晚"},{id:"8",title:"创建时间晚到早"},{id:"9",title:"排序高到低"},{id:"10",title:"排序低到高"}],E=(0,h.connect)(function(e){var t=e.view.goods;return{loading:t.loading,listData:t.listData,categoryList:t.categoryList}})(r=s.default.create()((n=l=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,n=Array(l),i=0;i<l;i++)n[i]=arguments[i];return a=r=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n))),r.state={queryParams:{sale_state:"all",title:null,category_ids:[],order_type:"all"}},r.handleSubmit=function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll(function(e,t){console.log(t);var a=(0,g.getQueryPath)("/goods/list",{page:1,rows:10,sale_state:t.sale_state,title:t.title,category_ids:t.category_ids,order_type:t.order_type});r.props.history.push(a)})},w(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.Component),c(t,[{key:"componentDidMount",value:function(){var e=m.default.getQuery();this.setState({queryParams:{sale_state:void 0!==e.sale_state?e.sale_state:"all",title:void 0!==e.title?e.title:null,category_ids:void 0!==e.category_ids?e.category_ids:[],order_type:void 0!==e.order_type?e.order_type:"all"}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,r=t.categoryList,l=t.loading,n=a.getFieldDecorator,c=this.state.queryParams,f=c.sale_state,y=c.title,h=c.category_ids,m=c.order_type,g=function e(t){return t.map(function(t){return{title:t.name,value:""+t.id,key:""+t.id,children:e(t.children||[])}})}(r),v=h&&h.length?[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(h)):[];return p.default.createElement(s.default,{layout:"inline",style:{paddingBottom:"24px",marginBottom:"24px",borderBottom:"1px dashed #ededed"},onSubmit:this.handleSubmit},p.default.createElement(b,{label:"商品名称"},n("title",{initialValue:y})(p.default.createElement(u.default,{placeholder:"请输入商品名称"}))),p.default.createElement(b,{label:"商品状态"},n("sale_state",{initialValue:f})(p.default.createElement(d.default,{placeholder:"请选择",style:{width:200}},P.map(function(e,t){return p.default.createElement(_,{value:e.id,key:t},e.title)})))),p.default.createElement(b,{label:"商品分类"},n("category_ids",{initialValue:v})(p.default.createElement(o.default,{style:{width:200},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:g,placeholder:"请选择",treeDefaultExpandAll:!0,allowClear:!0,multiple:!0}))),p.default.createElement(b,{label:"排序"},n("order_type",{initialValue:m})(p.default.createElement(d.default,{placeholder:"请选择",style:{width:200}},k.map(function(e,t){return p.default.createElement(_,{value:e.id,key:t},e.title)})))),p.default.createElement(b,null,p.default.createElement(i.default,{type:"primary",style:{marginRight:15},htmlType:"submit",loading:l},"筛选"),p.default.createElement(i.default,{onClick:function(){e.props.history.push("/goods/list")}},"清空筛选")))}}]),t}(),l.defaultProps={form:y.formdDfaultProps},r=n))||r)||r;t.default=E},34:function(e,t,a){"use strict"}}]);
//# sourceMappingURL=57.js.map